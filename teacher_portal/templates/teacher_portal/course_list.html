{% extends "teacher_portal/base.html" %}
{% load static %}

{% block extra_css %}
    <!-- Table CSS -->
    <link rel="stylesheet" href="{% static 'teacher_portal/css/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'teacher_portal/css/_status_indicators.css' %}">
    <link rel="stylesheet" href="{% static 'teacher_portal/css/sidebar.css' %}">
    <link rel="stylesheet" href="{% static 'teacher_portal/css/components.css' %}">
    <link rel="stylesheet" href="{% static 'teacher_portal/css/core.css' %}">
    <link rel="stylesheet" href="{% static 'teacher_portal/css/forms.css' %}">
    <link rel="stylesheet" href="{% static 'teacher_portal/css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'teacher_portal/css/tables.css' %}">
    <style>
        .course-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        .course-table th:nth-child(4) {
            width: 25%;
        }
    </style>
{% endblock %}

{% block content %}
<h2>Courses</h2>

<a href="{% url 'course_create' %}" class="btn btn-sm btn-primary" style="margin-bottom: 10px;">+ Add Course</a>

<table class=" table course-table able-striped table-hover">
    <thead>
        <tr>
            <th>Title</th>
            <th>Students</th>
            <th>Assignments</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for course in courses %}
        <tr>
            <td>{{ course.title }}</td>
            <td>{{ course.enrolled_students.count }}</td>
            <td>{{ course.assignments.count }}</td>
            <td class="course-actions">
                <a href="{% url 'course_detail' course.id %}" class="btn btn-sm btn-primary">View</a>
                <a href="{% url 'course_edit' course.id %}" class="btn btn-sm btn-success">Edit</a>
                <a href="{% url 'course_delete' course.id %}" 
                   class="btn btn-sm btn-danger"
                   onclick="return confirm('Are you sure you want to delete this course?');">
                   Delete
                </a>
                <a href="{% url 'assignment_add'%}" class="btn btn-sm btn-warning">Add Assignment</a>
                <a href="{% url 'add_student_to_course' course.id %}" class="btn btn-sm btn-info">Add Student</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="4" style="text-align: center;">No courses available.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
